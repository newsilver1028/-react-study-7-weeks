{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nexport const initialState = {\n  discounts: [],\n  totalPrice: 0\n};\n\nfunction getDiscountedPrice(price, rate) {\n  return (100 - rate) * 0.01 * price;\n}\n\nexport const discountReducer = createSlice({\n  name: 'discountReducer',\n  initialState: initialState,\n  reducers: {\n    STORE: (state, _ref) => {\n      let {\n        payload\n      } = _ref;\n      state.discounts = payload.map(discount => {\n        return { ...discount,\n          discountedMenu: [],\n          discountedPrice: 0,\n          excludedPrice: 0\n        };\n      });\n    },\n    UPDATE: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      state.discounts.forEach(discount => {\n        payload.forEach(food => {\n          const discountedPrice = getDiscountedPrice(food.priceTimesQuantity, discount.discount_rate);\n          const menuObject = {\n            name: food.name,\n            discountedPrice: discountedPrice,\n            excludedPrice: food.priceTimesQuantity - discountedPrice // 제외된 가격 (discounts : number)\n\n          };\n          discount.discountedMenu.push(menuObject);\n          discount.discountedPrices += discountedPrice; // if (!discount.discountedPrices) {\n          //   discount.discountedPrices = discountedPrice;\n          // } else {\n          //   discount.discountedPrices += discountedPrice;\n          // }\n        });\n      });\n    }\n  }\n});","map":{"version":3,"sources":["/Users/newsilver/Project/react-study-7-weeks/src/Reducers/discountReducer.ts"],"names":["createSlice","initialState","discounts","totalPrice","getDiscountedPrice","price","rate","discountReducer","name","reducers","STORE","state","payload","map","discount","discountedMenu","discountedPrice","excludedPrice","UPDATE","forEach","food","priceTimesQuantity","discount_rate","menuObject","push","discountedPrices"],"mappings":"AAAA,SAASA,WAAT,QAA2C,kBAA3C;AAuBA,OAAO,MAAMC,YAAY,GAAG;AAC1BC,EAAAA,SAAS,EAAE,EADe;AAE1BC,EAAAA,UAAU,EAAE;AAFc,CAArB;;AAKP,SAASC,kBAAT,CAA4BC,KAA5B,EAA2CC,IAA3C,EAAiE;AAC/D,SAAO,CAAC,MAAMA,IAAP,IAAe,IAAf,GAAsBD,KAA7B;AACD;;AAED,OAAO,MAAME,eAAe,GAAGP,WAAW,CAAC;AACzCQ,EAAAA,IAAI,EAAE,iBADmC;AAEzCP,EAAAA,YAAY,EAAEA,YAF2B;AAGzCQ,EAAAA,QAAQ,EAAE;AACRC,IAAAA,KAAK,EAAE,CAACC,KAAD,WAAoD;AAAA,UAA5C;AAAEC,QAAAA;AAAF,OAA4C;AACzDD,MAAAA,KAAK,CAACT,SAAN,GAAkBU,OAAO,CAACC,GAAR,CAAYC,QAAQ,IAAI;AACxC,eAAO,EACL,GAAGA,QADE;AAELC,UAAAA,cAAc,EAAE,EAFX;AAGLC,UAAAA,eAAe,EAAE,CAHZ;AAILC,UAAAA,aAAa,EAAE;AAJV,SAAP;AAMD,OAPiB,CAAlB;AAQD,KAVO;AAWRC,IAAAA,MAAM,EAAE,CAACP,KAAD,YAAsD;AAAA,UAA9C;AAAEC,QAAAA;AAAF,OAA8C;AAC5DD,MAAAA,KAAK,CAACT,SAAN,CAAgBiB,OAAhB,CAAyBL,QAAD,IAAc;AACpCF,QAAAA,OAAO,CAACO,OAAR,CAAiBC,IAAD,IAAU;AACxB,gBAAMJ,eAAe,GAAGZ,kBAAkB,CAACgB,IAAI,CAACC,kBAAN,EAAyBP,QAAQ,CAACQ,aAAlC,CAA1C;AACA,gBAAMC,UAAU,GAAG;AACjBf,YAAAA,IAAI,EAAEY,IAAI,CAACZ,IADM;AAEjBQ,YAAAA,eAAe,EAAEA,eAFA;AAGjBC,YAAAA,aAAa,EAAEG,IAAI,CAACC,kBAAL,GAA0BL,eAHxB,CAIjB;;AAJiB,WAAnB;AAOAF,UAAAA,QAAQ,CAACC,cAAT,CAAyBS,IAAzB,CAA8BD,UAA9B;AACAT,UAAAA,QAAQ,CAACW,gBAAT,IAA8BT,eAA9B,CAVwB,CAWxB;AACA;AACA;AACA;AACA;AACD,SAhBD;AAiBD,OAlBD;AAmBD;AA/BO;AAH+B,CAAD,CAAnC","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { CartData, StoredFoods } from './cartReducer';\n\nexport interface DiscountsData {\n  discounts: Discounts[];\n  totalPrice?: number;\n}\n\nexport interface Discounts {\n  id: string;\n  name: string;\n  discount_rate: number;\n  discountedMenu?: DiscountedMenu[];\n  discountedPrices?: number;\n}\n\nexport interface DiscountedMenu {\n  name: string;\n  discountedPrice: number;\n  excludedPrice: number;\n}\n\nexport const initialState = {\n  discounts: [],\n  totalPrice: 0,\n}\n\nfunction getDiscountedPrice(price: number, rate: number): number {\n  return (100 - rate) * 0.01 * price;\n}\n\nexport const discountReducer = createSlice({\n  name: 'discountReducer',\n  initialState: initialState as DiscountsData,\n  reducers: {\n    STORE: (state, { payload }: PayloadAction<Discounts[]>) => {\n      state.discounts = payload.map(discount => {\n        return {\n          ...discount,\n          discountedMenu: [],\n          discountedPrice: 0,\n          excludedPrice: 0\n        }\n      })\n    },\n    UPDATE: (state, { payload }: PayloadAction<StoredFoods[]>) => {\n      state.discounts.forEach((discount) => {\n        payload.forEach((food) => {\n          const discountedPrice = getDiscountedPrice(food.priceTimesQuantity,discount.discount_rate);\n          const menuObject = {\n            name: food.name,\n            discountedPrice: discountedPrice,\n            excludedPrice: food.priceTimesQuantity - discountedPrice\n            // 제외된 가격 (discounts : number)\n          }\n          \n          discount.discountedMenu!.push(menuObject);\n          discount.discountedPrices! += discountedPrice;\n          // if (!discount.discountedPrices) {\n          //   discount.discountedPrices = discountedPrice;\n          // } else {\n          //   discount.discountedPrices += discountedPrice;\n          // }\n        })\n      })\n    }\n  }\n});\n"]},"metadata":{},"sourceType":"module"}