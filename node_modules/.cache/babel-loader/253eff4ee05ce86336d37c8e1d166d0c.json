{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';export var initialState={foodData:{minimum_order_price:0,merchant_name:\"\",items:[],discounts:[]},count:0,cartData:{storedFoods:[],totalPrice:0,isOverMinimum:false},totalPrice:0,isOverMinimum:false};export var cartReducer=createSlice({name:'cartReducer',initialState:initialState,reducers:{STORE:function STORE(state,_ref){var payload=_ref.payload;state.foodData=payload;state.count=0;state.cartData={storedFoods:[],totalPrice:0,isOverMinimum:false};},UPDATE:function UPDATE(state){state.cartData.totalPrice=state.cartData.storedFoods.reduce(function(prev,current){return prev+current.priceTimesQuantity;},0);state.cartData.isOverMinimum=state.foodData.minimum_order_price<=state.cartData.totalPrice;},ADD:function ADD(state,_ref2){var payload=_ref2.payload;var target=state.foodData.items.filter(function(item){return item.name===payload;})[0];var targetObject={name:target.name,quantity:1,price:target.price,priceTimesQuantity:target.price};state.cartData.storedFoods.push(targetObject);state.count++;},DELETE:function DELETE(state,_ref3){var payload=_ref3.payload;if(state.cartData!==undefined){state.cartData.storedFoods=state.cartData.storedFoods.filter(function(item){return item.name!==payload;});}},INCREASE:function INCREASE(state,_ref4){var payload=_ref4.payload;state.cartData.storedFoods=state.cartData.storedFoods.map(function(food){if(food.name===payload){food.quantity++;food.priceTimesQuantity=food.price*food.quantity;}return food;});},DECREASE:function DECREASE(state,_ref5){var payload=_ref5.payload;state.cartData.storedFoods=state.cartData.storedFoods.map(function(food){if(food.name===payload){if(food.quantity>1){food.quantity--;food.priceTimesQuantity=food.price*food.quantity;}}return food;});}}});","map":{"version":3,"sources":["/Users/newsilver/Project/react-study-7-weeks/src/Reducers/cartReducer.ts"],"names":["createSlice","initialState","foodData","minimum_order_price","merchant_name","items","discounts","count","cartData","storedFoods","totalPrice","isOverMinimum","cartReducer","name","reducers","STORE","state","payload","UPDATE","reduce","prev","current","priceTimesQuantity","ADD","target","filter","item","targetObject","quantity","price","push","DELETE","undefined","INCREASE","map","food","DECREASE"],"mappings":"AAAA,OAASA,WAAT,KAA2C,kBAA3C,CAIA,MAAO,IAAMC,CAAAA,YAAY,CAAG,CAC1BC,QAAQ,CAAE,CACRC,mBAAmB,CAAE,CADb,CAERC,aAAa,CAAE,EAFP,CAGRC,KAAK,CAAE,EAHC,CAIRC,SAAS,CAAE,EAJH,CADgB,CAO1BC,KAAK,CAAE,CAPmB,CAQ1BC,QAAQ,CAAE,CACRC,WAAW,CAAE,EADL,CAERC,UAAU,CAAE,CAFJ,CAGRC,aAAa,CAAE,KAHP,CARgB,CAa1BD,UAAU,CAAE,CAbc,CAc1BC,aAAa,CAAE,KAdW,CAArB,CAiBP,MAAO,IAAMC,CAAAA,WAAW,CAAGZ,WAAW,CAAC,CACrCa,IAAI,CAAE,aAD+B,CAErCZ,YAAY,CAAEA,YAFuB,CAGrCa,QAAQ,CAAE,CACRC,KAAK,CAAE,eAACC,KAAD,MAAiD,IAAvCC,CAAAA,OAAuC,MAAvCA,OAAuC,CACtDD,KAAK,CAACd,QAAN,CAAiBe,OAAjB,CACAD,KAAK,CAACT,KAAN,CAAc,CAAd,CACAS,KAAK,CAACR,QAAN,CAAiB,CACfC,WAAW,CAAE,EADE,CAEfC,UAAU,CAAE,CAFG,CAGfC,aAAa,CAAE,KAHA,CAAjB,CAKD,CATO,CAURO,MAAM,CAAE,gBAACF,KAAD,CAAW,CACjBA,KAAK,CAACR,QAAN,CAAgBE,UAAhB,CAA6BM,KAAK,CAACR,QAAN,CAAgBC,WAAhB,CAA4BU,MAA5B,CAC3B,SAACC,IAAD,CAAOC,OAAP,QAAmBD,CAAAA,IAAI,CAAGC,OAAO,CAACC,kBAAlC,EAD2B,CAC0B,CAD1B,CAA7B,CAEAN,KAAK,CAACR,QAAN,CAAgBG,aAAhB,CAAgCK,KAAK,CAACd,QAAN,CAAeC,mBAAf,EAAsCa,KAAK,CAACR,QAAN,CAAgBE,UAAtF,CACD,CAdO,CAeRa,GAAG,CAAE,aAACP,KAAD,OAA+C,IAArCC,CAAAA,OAAqC,OAArCA,OAAqC,CAClD,GAAMO,CAAAA,MAAM,CAAGR,KAAK,CAACd,QAAN,CAAeG,KAAf,CAAqBoB,MAArB,CAA4B,SAACC,IAAD,QAAiBA,CAAAA,IAAI,CAACb,IAAL,GAAcI,OAA/B,EAA5B,EAAoE,CAApE,CAAf,CACA,GAAMU,CAAAA,YAAY,CAAG,CACnBd,IAAI,CAAEW,MAAM,CAACX,IADM,CAEnBe,QAAQ,CAAE,CAFS,CAGnBC,KAAK,CAAEL,MAAM,CAACK,KAHK,CAInBP,kBAAkB,CAAEE,MAAM,CAACK,KAJR,CAArB,CAMAb,KAAK,CAACR,QAAN,CAAgBC,WAAhB,CAA4BqB,IAA5B,CAAiCH,YAAjC,EACAX,KAAK,CAACT,KAAN,GACD,CAzBO,CA0BRwB,MAAM,CAAE,gBAACf,KAAD,OAA+C,IAArCC,CAAAA,OAAqC,OAArCA,OAAqC,CACrD,GAAID,KAAK,CAACR,QAAN,GAAmBwB,SAAvB,CAAkC,CAChChB,KAAK,CAACR,QAAN,CAAeC,WAAf,CAA6BO,KAAK,CAACR,QAAN,CAAeC,WAAf,CAA2BgB,MAA3B,CAAkC,SAACC,IAAD,QAAsBA,CAAAA,IAAI,CAACb,IAAL,GAAcI,OAApC,EAAlC,CAA7B,CACD,CACF,CA9BO,CA+BRgB,QAAQ,CAAE,kBAACjB,KAAD,OAA+C,IAArCC,CAAAA,OAAqC,OAArCA,OAAqC,CACvDD,KAAK,CAACR,QAAN,CAAgBC,WAAhB,CAA8BO,KAAK,CAACR,QAAN,CAAgBC,WAAhB,CAA4ByB,GAA5B,CAAgC,SAACC,IAAD,CAAU,CACtE,GAAGA,IAAI,CAACtB,IAAL,GAAcI,OAAjB,CAA0B,CACxBkB,IAAI,CAACP,QAAL,GACAO,IAAI,CAACb,kBAAL,CAA0Ba,IAAI,CAACN,KAAL,CAAaM,IAAI,CAACP,QAA5C,CACD,CACD,MAAOO,CAAAA,IAAP,CACD,CAN6B,CAA9B,CAOD,CAvCO,CAwCRC,QAAQ,CAAE,kBAACpB,KAAD,OAA+C,IAArCC,CAAAA,OAAqC,OAArCA,OAAqC,CACvDD,KAAK,CAACR,QAAN,CAAgBC,WAAhB,CAA8BO,KAAK,CAACR,QAAN,CAAgBC,WAAhB,CAA4ByB,GAA5B,CAAgC,SAACC,IAAD,CAAU,CACtE,GAAGA,IAAI,CAACtB,IAAL,GAAcI,OAAjB,CAA0B,CACxB,GAAGkB,IAAI,CAACP,QAAL,CAAgB,CAAnB,CAAsB,CACpBO,IAAI,CAACP,QAAL,GACAO,IAAI,CAACb,kBAAL,CAA0Ba,IAAI,CAACN,KAAL,CAAaM,IAAI,CAACP,QAA5C,CACD,CACF,CACD,MAAOO,CAAAA,IAAP,CACD,CAR6B,CAA9B,CASD,CAlDO,CAH2B,CAAD,CAA/B","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { Data, FoodData, StoredFoods, Items } from '../Interface/cartInterface';\n\nexport const initialState = {\n  foodData: {\n    minimum_order_price: 0,\n    merchant_name: \"\",\n    items: [],\n    discounts: []\n  },\n  count: 0,\n  cartData: {\n    storedFoods: [],\n    totalPrice: 0,\n    isOverMinimum: false\n  },\n  totalPrice: 0,\n  isOverMinimum: false,\n}\n\nexport const cartReducer = createSlice({\n  name: 'cartReducer',\n  initialState: initialState as Data,\n  reducers: {\n    STORE: (state, { payload }: PayloadAction<FoodData>) => {\n      state.foodData = payload;\n      state.count = 0;\n      state.cartData = {\n        storedFoods: [],\n        totalPrice: 0,\n        isOverMinimum: false\n      }\n    },\n    UPDATE: (state) => {\n      state.cartData!.totalPrice = state.cartData!.storedFoods.reduce(\n        (prev, current) => prev + current.priceTimesQuantity,0);\n      state.cartData!.isOverMinimum = state.foodData.minimum_order_price <= state.cartData!.totalPrice;\n    },\n    ADD: (state, { payload }: PayloadAction<string>) => {\n      const target = state.foodData.items.filter((item: Items) => item.name === payload)[0];\n      const targetObject = {\n        name: target.name,\n        quantity: 1,\n        price: target.price,\n        priceTimesQuantity: target.price\n      }\n      state.cartData!.storedFoods.push(targetObject);\n      state.count!++;\n    },\n    DELETE: (state, { payload }: PayloadAction<string>) => {\n      if (state.cartData !== undefined) {\n        state.cartData.storedFoods = state.cartData.storedFoods.filter((item:StoredFoods) => item.name !== payload);\n      }\n    },\n    INCREASE: (state, { payload }: PayloadAction<string>) => {\n      state.cartData!.storedFoods = state.cartData!.storedFoods.map((food) => {\n        if(food.name === payload) {\n          food.quantity++;\n          food.priceTimesQuantity = food.price * food.quantity;\n        }\n        return food;\n      });\n    },\n    DECREASE: (state, { payload }: PayloadAction<string>) => {\n      state.cartData!.storedFoods = state.cartData!.storedFoods.map((food) => {\n        if(food.name === payload) {\n          if(food.quantity > 1) {\n            food.quantity--;\n            food.priceTimesQuantity = food.price * food.quantity;\n          }\n        }\n        return food;\n      });\n    }\n  }\n});\n"]},"metadata":{},"sourceType":"module"}